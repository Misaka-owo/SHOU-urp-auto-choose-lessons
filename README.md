# 上海海洋大学urp教务系统抢课小软件
## 程序有BUG!!!暂时请勿使用！！！！
19新生选英语的时候测试了一下，发现专业代码会更改的原因导致其中一个变量有问题，修改以后未测试成功，又因为课余量太少不敢退课后重选来调试，因此暂时搁置，等下次选修课开放以后再说，还有一个BUG是部分课程（可能是必修课或者什么的）有课程设置的一个代码，我初始设置的是按选修课的空字符串设置的，因此可能有些课程选不了，同样现在也得等下次选课，所以请各位耐心等待，反正现在也用不着。。。

2019/9/7
adminerest

- - - -

抢课好像是多少高校学生头疼的一个问题。。。

为了各位（以及我）能抢到一门好（水）课，趁着选课开放写了这么一个小程序

本人新手写代码还请各位大佬多多指教！

好了，来说说这垃圾程序怎么用
## 依赖的库：
* requests	//请求用的
* bs4	//解析请求到的网页用的
* cv2	//验证码显示用的
* numpy（应该是自带了，或者装cv2的时候也能安装上，反正没有就装一下）	//同上。。。
## 注意事项！！！
lessons.py文件中的`sleep(1)`严禁删除！！！   
一方面是时间太短会导致服务器没有处理完选课数据，导致程序的请求失败，另一方面是减轻学校服务器压力   
程序运行过程中可以摁下 control键 + c 停止，停止后务必检查课表情况！！！   
登录的时候弹出的验证码要点击一下验证码的框然后摁一下随便啥键然后才能输入，这点要注意！
## 如何导入所要选的课程？
在main.py里的lessons = Lessons()下面有写
### 使用了这样结构的一个字典：
`lesson_info = {"no": "课程号", "id": "课序号", "term": "学期", "name": "课程名称"}`
### 样例：
`lesson_info = {"no": "7603503", "id": "01", "term": "2019-2020-1-1", "name": "电影美学"}`
**每添加一条lesson_info代码后面下一行要跟上`lessons.deal_info(lesson_info)`以便加入列表里面**

## 错误及原因：
由于暂未在高峰期间进行测试，所以暂时不确定稳定性咋样。。。先将就着用吧，现在用着感觉没啥问题
反正有问题隔壁Issues欢迎反馈！
- - - -
错误显示：xxxx！连接错误！   
错误原因：在xxx时候网络连接有问题，请检查网络！
- - - -
错误显示：xxxx！请求网页有问题！   
错误原因：在xxx时候请求网页有问题，**此时务必告知我！**
- - - -
错误显示：xxxx！请求超时！   
错误原因：在xxx时候请求超时，请检查网络！
- - - -
错误显示：验证码输入错误！   
错误原因：登录时输入的验证码错误
- - - -
错误显示：用户名或密码输入错误！   
错误原因：登录时用户名或密码输入错误！
- - - -
错误显示：有人登陆了您的账号！   
错误原因：在运行时您（或他人）登录了您的账号导致程序被强制下线
- - - -
错误显示：对不起，当前为非选课阶段！   
错误原因：教务处选课系统没开。。。
- - - -
错误显示：选课提交失败！xxx！/选课提交确认失败！xxx！/获取选课结果失败！xxx！   
错误原因：在选课提交和获取选课结果时发生网络错误，**请务必前往urp确认选课状态！**
- - - -
错误显示：第n次获取选课结果失败！正在重试！   
错误原因：暂未获取到正常的返回结果，请耐心等待
- - - -
错误显示：获取选课结果失败！请到urp进行确认！   
错误原因：多次未获得正确的选课结果，请务必前往urp确认选课状态，而后检查自己输入的信息是否有误，同时隔壁提交issue
- - - -
错误显示：程序报错。。。   
错误原因：未知。。。请提交隔壁issue，不过倒是现在登录时验证码无法正常显示还没处理实现，所以此时可能会出现异常，不过不影响课表，只是无法登录
## 运行成功展示
正常会逐次显示第n次选课！   
如果出现类似选课不符合年级或者其他之类的是正常现象，表明你选的课不符合教务处的规定，重新挑课输入进去就行了   
如果出现没有该课程之类的，表明你输入的课程信息有问题，请重新核对后再次尝试，如果不懂去隔壁开issue   
如果出现上面两个问题，程序会继续正常运行并将有问题的课程去除，您可以终止程序重新输入课程或者程序抢到剩余课程时再进行修改   
全部课程抢到之后会提示：全部课程已成功选上！请去urp查收！这时去urp查收课程就好了